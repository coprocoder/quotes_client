"use strict";(self.webpackChunkquotes=self.webpackChunkquotes||[]).push([[277],{122:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var a=n(439),s=n(32),r=n(791),l=n(689),o=n(87),i=n(334),c=n.n(i),u=n(683),d=n(671),h=n(144),m=n(98),f=new(function(){function e(){(0,d.Z)(this,e),this.modalOpen=!1,this.loading=!1,this.error=null,this.quotesObjPart1={},this.quotesObjPart2={},(0,m.ky)(this)}return(0,h.Z)(e,[{key:"fetchQuotes",value:function(){var e=this;Object.keys(this.quotesObjPart1).length&&Object.keys(this.quotesObjPart2).length||(this.loading=!0),fetch("https://coprocoder.github.io/quotes_client/api/quotes").then((function(e){return e.json()})).then((function(t){!function(t){var n=Object.entries(t),a=Math.floor(n.length/2),s=Object.fromEntries(n.slice(0,a)),r=Object.fromEntries(n.slice(a));e.quotesObjPart1=(0,u.Z)((0,u.Z)({},e.quotesObjPart1),s)||{},e.quotesObjPart2=(0,u.Z)((0,u.Z)({},e.quotesObjPart2),r)||{}}(t),e.loading=!1,e.error=null})).catch((function(t){console.log(t),e.error=t}))}}]),e}()),j=n(164),b=n(184),v=function(e){var t=e.children,n=e.title,s=void 0===n?"":n,l=e.open,o=void 0!==l&&l,i=e.onClose,c=void 0===i?function(){}:i,u=(0,r.useState)(),d=(0,a.Z)(u,2),h=d[0],m=d[1],f=r.useMemo((function(){return document.createElement("div")}),[]),v=r.useMemo((function(){return j.createPortal((0,b.jsxs)("div",{style:{visibility:o?"visible":"hidden",zIndex:h},children:[(0,b.jsx)("div",{className:"customModal-overlay",onClick:g}),(0,b.jsxs)("div",{className:x(),children:[s&&(0,b.jsxs)("div",{className:"customModal-header",children:[(0,b.jsx)("div",{className:"customModal-header-cross",onClick:g,children:"\xd7"}),s]}),(0,b.jsx)("div",{className:"customModal-body",children:t})]})]}),f)}));function x(){var e=["customModal"];return o&&e.push("customModal-open"),e.join(" ")}function g(){c()}return(0,r.useEffect)((function(){return document.body.appendChild(f),function(){document.body.removeChild(f)}}),[f]),(0,r.useEffect)((function(){o?(m(document.querySelectorAll(".customModal-open").length+1+1e3),document.documentElement.style.overflow="hidden"):document.querySelectorAll(".customDrawer-open").length||(document.documentElement.style.overflow="unset")}),[o]),v},x=n(733),g=function(e){var t,n=e.paramKey,a=e.rowData,s=parseFloat(a[n]).toFixed(12).replace(/\.?0+$/,"").slice(0,12);return(0,b.jsxs)("tr",{className:"tableRowForm-row",children:[(0,b.jsx)("td",{children:(null===(t=y[n])||void 0===t?void 0:t.label)||n}),(0,b.jsx)("td",{style:{paddingLeft:"1rem"},children:s})]})},p=function(e){var t=e.rowData;delete t.id;var n=t.pairName;return delete t.pairName,(0,b.jsxs)("div",{className:"tableRowForm",children:[(0,b.jsx)("div",{className:"tableRowForm-title",children:n}),(0,b.jsx)("table",{children:(0,b.jsx)("tbody",{children:Object.keys(t).map((function(e,n){return(0,b.jsx)(g,{paramKey:e,rowData:t},n)}))})})]})},y={last:{label:"\u0426\u0435\u043d\u0430",align:"left"},highestBid:{label:"\u041d\u0430\u0438\u0432\u044b\u0441\u0448\u0435\u0435",align:"right"},percentChange:{label:"24\u0447 \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438e",align:"right"}},O=function(e){var t=e.pairName,n=e.rowData,a=e.onClick,s=(0,r.useRef)(n||{});return(0,r.useEffect)((function(){s.current=n}),[n]),(0,b.jsxs)("tr",{onClick:a,children:[(0,b.jsx)("td",{children:t.replace("_"," / ")}),Object.keys(y).map((function(e,t){var a,r=y[e],l=parseFloat(n[e]),o=l.toFixed(12).replace(/\.?0+$/,"").slice(0,12),i=Number(null===(a=s.current)||void 0===a?void 0:a[e]),c=l>i,u=l<i;return(0,b.jsx)("td",{style:{textAlign:r.align,background:c?"hsl(120deg, 100%, 25%, 0.1)":u?"hsl(0deg, 100%, 50%, 0.1)":null},children:o},t)}))]})},q=function(e){var t=e.data,n=(0,r.useState)(null),s=(0,a.Z)(n,2),l=s[0],o=s[1],i=Object.keys(t);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("table",{className:"tableWidget",children:[(0,b.jsx)("thead",{className:"tableWidget-head",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object.keys(y).map((function(e,t){var n=y[e];return(0,b.jsx)("th",{style:{textAlign:n.align},children:n.label},t)}))]})}),t?(0,b.jsx)("tbody",{className:"tableWidget-body",children:i.map((function(e,n){var a=t[e];return(0,b.jsx)(O,{pairName:e,rowData:a,onClick:function(){return t=(0,u.Z)((0,u.Z)({},a),{},{pairName:e}),f.modalOpen=!0,void o(t);var t}},n)}))}):(0,b.jsx)(x.Z,{})]}),(0,b.jsx)(v,{open:f.modalOpen,onClose:function(){f.modalOpen=!1,o(null)},children:f.modalOpen&&(0,b.jsx)(p,{rowData:l})})]})},N=(0,s.Pi)((function(){var e=(0,l.UO)().id,t=(0,r.useState)(+e||1),n=(0,a.Z)(t,2),s=n[0],i=n[1];return(0,r.useEffect)((function(){f.fetchQuotes()}),[]),(0,r.useEffect)((function(){var e=setInterval((function(){return f.fetchQuotes()}),5e3);return f.modalOpen&&clearInterval(e),function(){return clearInterval(e)}}),[f.modalOpen]),(0,b.jsxs)("div",{className:"quotesPage",children:[(0,b.jsxs)("div",{className:"quotesPage-header",children:[(0,b.jsx)(o.rU,{className:"quotesPage-backBtn",to:"/",children:"\u041e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438"}),(0,b.jsx)("div",{className:"quotesPage-animIndicator",to:"/",children:f.error?"\u041e\u0448\u0438\u0431\u043a\u0430":f.loading?(0,b.jsx)(c(),{size:30}):null})]}),(0,b.jsxs)("div",{className:"quotesPage-tabSelector",children:[(0,b.jsx)("div",{className:"quotesPage-tabSelection ".concat(1==s?"quotesPage-tabSelection-active":""),onClick:function(){return i(1)},children:"\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0410"}),(0,b.jsx)("div",{className:"quotesPage-tabSelection ".concat(2==s?"quotesPage-tabSelection-active":""),onClick:function(){return i(2)},children:"\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0411"})]}),(0,b.jsx)("div",{className:"quotesPage-tab",children:1===s?(0,b.jsx)(q,{data:f.quotesObjPart1}):(0,b.jsx)(q,{data:f.quotesObjPart2})})]})}))}}]);
//# sourceMappingURL=277.c10fc331.chunk.js.map