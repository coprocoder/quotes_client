"use strict";(self.webpackChunkquotes=self.webpackChunkquotes||[]).push([[653],{653:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var r=n(439),a=n(32),s=n(791),o=n(689),l=n(87),i=n(334),c=n.n(i),u=n(683),d=n(671),h=n(144),m=n(98),f=new(function(){function e(){(0,d.Z)(this,e),this.modalOpen=!1,this.loading=!1,this.error=null,this.quotesObjPart1={},this.quotesObjPart2={},(0,m.ky)(this)}return(0,h.Z)(e,[{key:"fetchQuotes",value:function(){var e=this;Object.keys(this.quotesObjPart1).length&&Object.keys(this.quotesObjPart2).length||(this.loading=!0),fetch("https://coprocoder.github.io/quotes_client/api/quotes").then((function(e){return e.json()})).then((function(t){!function(t){var n=Object.entries(t),r=Math.floor(n.length/2),a=Object.fromEntries(n.slice(0,r)),s=Object.fromEntries(n.slice(r));e.quotesObjPart1=(0,u.Z)((0,u.Z)({},e.quotesObjPart1),a),e.quotesObjPart2=(0,u.Z)((0,u.Z)({},e.quotesObjPart2),s)}(t),e.loading=!1,e.error=null})).catch((function(t){console.log(t),e.error=t}))}}]),e}()),j=n(164),b=n(184),v=function(e){var t=e.children,n=e.title,a=void 0===n?"":n,o=e.open,l=void 0!==o&&o,i=e.onClose,c=void 0===i?function(){}:i,u=(0,s.useState)(null),d=(0,r.Z)(u,2),h=d[0],m=d[1],f=s.useMemo((function(){return document.createElement("div")}),[]),v=s.useMemo((function(){return j.createPortal((0,b.jsxs)("div",{style:{visibility:l?"visible":"hidden",zIndex:h},children:[(0,b.jsx)("div",{className:"customModal-overlay",onClick:g}),(0,b.jsxs)("div",{className:x(),children:[a&&(0,b.jsxs)("div",{className:"customModal-header",children:[(0,b.jsx)("div",{className:"customModal-header-cross",onClick:g,children:"\xd7"}),a]}),(0,b.jsx)("div",{className:"customModal-body",children:t})]})]}),f)}),[l,t]);function x(){var e=["customModal"];return l&&e.push("customModal-open"),e.join(" ")}function g(){c()}return(0,s.useEffect)((function(){return document.body.appendChild(f),function(){document.body.removeChild(f)}}),[f]),(0,s.useEffect)((function(){l?(m(document.querySelectorAll(".customModal-open").length+1+1e3),document.documentElement.style.overflow="hidden"):document.querySelectorAll(".customDrawer-open").length||(document.documentElement.style.overflow="unset")}),[l]),v},x=n(608),g=function(e){var t=parseFloat(e),n=t.toFixed(12).replace(/\.?0+$/,"").slice(0,12);return{rawNum:t,normalizedNum:n}},p=function(e){var t=e.pairName,n=e.rowData,r=e.onClick,a=(0,s.useRef)(n||{}),o=(0,s.useRef)(t);return(0,s.useEffect)((function(){a.current=n,o.current=t}),[n]),(0,b.jsxs)("tr",{onClick:r,children:[(0,b.jsx)("td",{children:t.replace("_"," / ")}),Object.keys(q).map((function(e,r){var s=q[e],l=n[e],i=g(l),c=i.rawNum,u=i.normalizedNum;return(0,b.jsx)("td",{style:{textAlign:s.align,background:function(){var n="transparent";if(o.current==t){var r,s=Number(null===(r=a.current)||void 0===r?void 0:r[e]);n=c>s?"hsl(120deg, 100%, 25%, 0.1)":c<s?"hsl(0deg, 100%, 50%, 0.1)":"transparent"}return n}()},children:u},r)}))]})},N=function(e){var t,n=e.paramKey,r=e.rowData[n],a=g(r).normalizedNum;return(0,b.jsxs)("tr",{className:"tableRowForm-row",children:[(0,b.jsx)("td",{children:(null===(t=q[n])||void 0===t?void 0:t.label)||n}),(0,b.jsx)("td",{style:{paddingLeft:"1rem"},children:a})]})},y=function(e){var t=e.rowData;delete t.id;var n=t.pairName;return delete t.pairName,(0,b.jsxs)("div",{className:"tableRowForm",children:[(0,b.jsx)("div",{className:"tableRowForm-title",children:n}),(0,b.jsx)("table",{children:(0,b.jsx)("tbody",{children:Object.keys(t).map((function(e,n){return(0,b.jsx)(N,{paramKey:e,rowData:t},n)}))})})]})},q={last:{label:"\u0426\u0435\u043d\u0430",align:"left"},highestBid:{label:"\u041d\u0430\u0438\u0432\u044b\u0441\u0448\u0435\u0435",align:"right"},percentChange:{label:"24\u0447 \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438e",align:"right"}},O=function(e){var t=e.data,n=(0,s.useState)(null),a=(0,r.Z)(n,2),o=a[0],l=a[1],i=Object.keys(t);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("table",{className:"tableWidget",children:[(0,b.jsx)("thead",{className:"tableWidget-head",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object.keys(q).map((function(e,t){var n=q[e];return(0,b.jsx)("th",{style:{textAlign:n.align},children:n.label},t)}))]})}),t?(0,b.jsx)("tbody",{className:"tableWidget-body",children:i.map((function(e,n){var r=t[e];return(0,b.jsx)(p,{pairName:e,rowData:r,onClick:function(){return function(e){f.modalOpen=!0,l(e)}((0,u.Z)((0,u.Z)({},r),{},{pairName:e}))}},n)}))}):(0,b.jsx)(x.Z,{})]}),(0,b.jsx)(v,{open:f.modalOpen,onClose:function(){f.modalOpen=!1,l(null)},children:o&&(0,b.jsx)(y,{rowData:o})})]})},P=(0,a.Pi)((function(){var e=(0,o.UO)().id,t=(0,s.useState)(Number(e)||1),n=(0,r.Z)(t,2),a=n[0],i=n[1];return(0,s.useEffect)((function(){f.fetchQuotes()}),[]),(0,s.useEffect)((function(){var e=setInterval((function(){return f.fetchQuotes()}),5e3);return f.modalOpen&&clearInterval(e),function(){return clearInterval(e)}}),[f.modalOpen]),(0,b.jsxs)("div",{className:"quotesPage",children:[(0,b.jsxs)("div",{className:"quotesPage-header",children:[(0,b.jsx)(l.rU,{className:"quotesPage-backBtn",to:"/",children:"\u041e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438"}),(0,b.jsx)("div",{className:"quotesPage-animIndicator",children:f.error?"\u041e\u0448\u0438\u0431\u043a\u0430":f.loading?(0,b.jsx)(c(),{size:30}):null})]}),(0,b.jsxs)("div",{className:"quotesPage-tabSelector",children:[(0,b.jsx)("div",{className:"quotesPage-tabSelection ".concat(1==a?"quotesPage-tabSelection-active":""),onClick:function(){return i(1)},children:"\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0410"}),(0,b.jsx)("div",{className:"quotesPage-tabSelection ".concat(2==a?"quotesPage-tabSelection-active":""),onClick:function(){return i(2)},children:"\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0411"})]}),(0,b.jsx)("div",{className:"quotesPage-tab",children:(0,b.jsx)(O,{data:1===a?f.quotesObjPart1:f.quotesObjPart2})})]})}))}}]);
//# sourceMappingURL=653.e2cc64c3.chunk.js.map