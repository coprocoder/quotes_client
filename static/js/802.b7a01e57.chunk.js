"use strict";(self.webpackChunkquotes=self.webpackChunkquotes||[]).push([[802],{802:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var a=n(439),r=n(32),s=n(791),l=n(689),o=n(87),i=n(334),c=n.n(i),u=n(683),d=n(671),h=n(144),m=n(243),f=n(98),j=new(function(){function e(){(0,d.Z)(this,e),this.modalOpen=!1,this.loading=!1,this.error=null,this.quotesObjPart1={},this.quotesObjPart2={},(0,f.ky)(this)}return(0,h.Z)(e,[{key:"fetchQuotes",value:function(){var e=this;Object.keys(this.quotesObjPart1).length&&Object.keys(this.quotesObjPart2).length||(this.loading=!0),m.Z.get("http://195.15.219.85/api/quotes").then((function(t){!function(t){var n=Object.entries(t),a=Math.floor(n.length/2),r=Object.fromEntries(n.slice(0,a)),s=Object.fromEntries(n.slice(a));e.quotesObjPart1=(0,u.Z)((0,u.Z)({},e.quotesObjPart1),r),e.quotesObjPart2=(0,u.Z)((0,u.Z)({},e.quotesObjPart2),s)}(t.data),e.error=null,e.loading=!1})).catch((function(t){console.log(t),e.error=t}))}}]),e}()),v=n(164),b=n(184),x=function(e){var t=e.children,n=e.title,r=void 0===n?"":n,l=e.open,o=void 0!==l&&l,i=e.onClose,c=void 0===i?function(){}:i,u=(0,s.useState)(null),d=(0,a.Z)(u,2),h=d[0],m=d[1],f=s.useMemo((function(){return document.createElement("div")}),[]),j=s.useMemo((function(){return v.createPortal((0,b.jsxs)("div",{style:{visibility:o?"visible":"hidden",zIndex:h},children:[(0,b.jsx)("div",{className:"customModal-overlay",onClick:g}),(0,b.jsxs)("div",{className:x(),children:[r&&(0,b.jsxs)("div",{className:"customModal-header",children:[(0,b.jsx)("div",{className:"customModal-header-cross",onClick:g,children:"\xd7"}),r]}),(0,b.jsx)("div",{className:"customModal-body",children:t})]})]}),f)}),[o,t]);function x(){var e=["customModal"];return o&&e.push("customModal-open"),e.join(" ")}function g(){c()}return(0,s.useEffect)((function(){return document.body.appendChild(f),function(){document.body.removeChild(f)}}),[f]),(0,s.useEffect)((function(){o?(m(document.querySelectorAll(".customModal-open").length+1+1e3),document.documentElement.style.overflow="hidden"):document.querySelectorAll(".customDrawer-open").length||(document.documentElement.style.overflow="unset")}),[o]),j},g=n(608),p=function(e){var t=parseFloat(e),n=t.toFixed(12).replace(/\.?0+$/,"").slice(0,12);return{rawNum:t,normalizedNum:n}},N=function(e){var t=e.pairName,n=e.rowData,a=e.onClick,r=(0,s.useRef)(n||{}),l=(0,s.useRef)(t);return(0,s.useEffect)((function(){r.current=n,l.current=t}),[n]),(0,b.jsxs)("tr",{onClick:a,children:[(0,b.jsx)("td",{children:t.replace("_"," / ")}),Object.keys(q).map((function(e,a){var s=q[e],o=n[e],i=p(o),c=i.rawNum,u=i.normalizedNum;return(0,b.jsxs)("td",{style:{textAlign:s.align,background:function(){var n="transparent";if(l.current==t){var a,s=Number(null===(a=r.current)||void 0===a?void 0:a[e]);n=c>s?"hsl(120deg, 100%, 25%, 0.1)":c<s?"hsl(0deg, 100%, 50%, 0.1)":"transparent"}return n}()},children:[u,null===s||void 0===s?void 0:s.postfix]},a)}))]})},y=function(e){var t=e.paramKey,n=e.rowData[t],a=q[t],r=p(n).normalizedNum;return(0,b.jsxs)("tr",{className:"tableRowForm-row",children:[(0,b.jsx)("td",{children:(null===a||void 0===a?void 0:a.label)||t}),(0,b.jsxs)("td",{style:{paddingLeft:"1rem"},children:[r,null===a||void 0===a?void 0:a.postfix]})]})},O=function(e){var t=e.rowData;delete t.id;var n=t.pairName;return delete t.pairName,(0,b.jsxs)("div",{className:"tableRowForm",children:[(0,b.jsx)("div",{className:"tableRowForm-title",children:n}),(0,b.jsx)("table",{children:(0,b.jsx)("tbody",{children:Object.keys(t).map((function(e,n){return(0,b.jsx)(y,{paramKey:e,rowData:t},n)}))})})]})},q={last:{label:"\u0426\u0435\u043d\u0430",align:"left"},highestBid:{label:"\u041d\u0430\u0438\u0432\u044b\u0441\u0448\u0435\u0435",align:"right"},percentChange:{label:"24\u0447 \u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438e",postfix:"%",align:"right"}},P=function(e){var t=e.data,n=(0,s.useState)(null),r=(0,a.Z)(n,2),l=r[0],o=r[1],i=Object.keys(t);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("table",{className:"tableWidget",children:[(0,b.jsx)("thead",{className:"tableWidget-head",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{textAlign:"left"},children:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object.keys(q).map((function(e,t){var n=q[e];return(0,b.jsx)("th",{style:{textAlign:n.align},children:n.label},t)}))]})}),t?(0,b.jsx)("tbody",{className:"tableWidget-body",children:i.map((function(e,n){var a=t[e];return(0,b.jsx)(N,{pairName:e,rowData:a,onClick:function(){return function(e){j.modalOpen=!0,o(e)}((0,u.Z)((0,u.Z)({},a),{},{pairName:e}))}},n)}))}):(0,b.jsx)(g.Z,{})]}),(0,b.jsx)(x,{open:j.modalOpen,onClose:function(){j.modalOpen=!1,o(null)},children:l&&(0,b.jsx)(O,{rowData:l})})]})},k=(0,r.Pi)((function(){var e=(0,l.UO)().id,t=(0,s.useState)(Number(e)||1),n=(0,a.Z)(t,2),r=n[0],i=n[1];return(0,s.useEffect)((function(){j.fetchQuotes()}),[]),(0,s.useEffect)((function(){var e=setInterval((function(){return j.fetchQuotes()}),5e3);return j.modalOpen&&clearInterval(e),function(){return clearInterval(e)}}),[j.modalOpen]),(0,b.jsxs)("div",{className:"quotesPage",children:[(0,b.jsxs)("div",{className:"quotesPage-header",children:[(0,b.jsx)(o.rU,{className:"quotesPage-backBtn",to:"/",children:"\u041e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438"}),(0,b.jsx)("div",{className:"quotesPage-animIndicator",children:j.error?"\u041e\u0448\u0438\u0431\u043a\u0430":j.loading?(0,b.jsx)(c(),{size:30}):null})]}),(0,b.jsxs)("div",{className:"quotesPage-tabSelector",children:[(0,b.jsx)("div",{className:"quotesPage-tabSelection ".concat(1==r?"quotesPage-tabSelection-active":""),onClick:function(){return i(1)},children:"\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0410"}),(0,b.jsx)("div",{className:"quotesPage-tabSelection ".concat(2==r?"quotesPage-tabSelection-active":""),onClick:function(){return i(2)},children:"\u041a\u043e\u0442\u0438\u0440\u043e\u0432\u043a\u0438 \u0411"})]}),(0,b.jsx)("div",{className:"quotesPage-tab",children:(0,b.jsx)(P,{data:1===r?j.quotesObjPart1:j.quotesObjPart2})})]})}))}}]);
//# sourceMappingURL=802.b7a01e57.chunk.js.map